digraph VET_DataFlow {
    rankdir=TB;
    bgcolor="transparent";
    node [shape=box, style="filled,rounded",     fillcolor="lightgray", fontcolor="black", color="black"];
    edge [color="black"];

    subgraph cluster_inputs {
        label="Inputs";
        fontcolor="black";
        color="black";
        style="filled";
        fillcolor="gainsboro";
        diff [label="Git diff"];
        goal [label="Goal\n(optional)", style="filled,dashed", fillcolor="lightgray"];
        history [label="Conversation history\n(optional)", style="filled,dashed", fillcolor="lightgray"];
    }

    context [label="Repo snapshot"];
    checks [label="LLM checks"];
    post [label="Filter + deduplicate"];
    issues [label="Issues"];

    diff -> context;
    diff -> checks;
    goal -> checks [style=dashed];
    history -> checks [style=dashed];
    context -> checks;

    checks -> post;
    post -> issues;
}
